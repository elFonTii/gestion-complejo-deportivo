{"version":3,"file":"ciuy.esm.js","sources":["../src/clean.ts","../src/generate-validation-digit.ts","../src/random.ts","../src/validate-id-number.ts"],"sourcesContent":["/**\n * Remove any unnecessary characters from the input.\n * @param idNumber \n */\nexport const cleanIdNumber: (idNumber: string) => string = idNumber =>\n  idNumber.replace(/\\D/g, '');\n","/**\n * Given a valid uruguayan identification number,\n * generates it's validation/verification digit.\n * \n * @example generateValidationDigit('1111111') => 1\n *\n * @param idNumber The first 6 or 7 digits of the identification number.\n */\nexport const generateValidationDigit: (\n  idNumber: string | number\n) => number = idNumber => {\n  let ci = typeof idNumber === 'number' ? idNumber.toString() : idNumber;\n\n  if (ci.length <= 6) {\n    for (let i = ci.length; i < 7; i++) {\n      ci = '0' + ci;\n    }\n  }\n\n  return safeGenerateValidationDigit(ci);\n};\n\nconst safeGenerateValidationDigit: (idNumber: string) => number = idNumber => {\n  let ci = idNumber;\n  let sum = 0;\n\n  for (let i = 0; i < 7; i++) {\n    sum += (parseInt('2987634'[i]) * parseInt(ci[i])) % 10;\n  }\n\n  if (sum % 10 === 0) {\n    return 0;\n  }\n\n  return 10 - (sum % 10);\n};\n","import { generateValidationDigit } from './generate-validation-digit';\n\n/**\n * Generates a random, valid  uruguayan identification number.\n */\nexport const generateRandomNumber: () => string = () => {\n  const base = Math.floor(Math.random() * 10_000_000 + 1_000_000).toString();\n  return base.substring(0, 7) + generateValidationDigit(base);\n};\n","import { cleanIdNumber } from './clean';\nimport { generateValidationDigit } from './generate-validation-digit';\n\n/**\n * Given an uruguayan identification number, checks the number is valid or not\n * based on its length and validation digit.\n * @param idNumber Uruguayan Identification Number (CÃ©dula de Identidad - DNIC)\n */\nexport const validateIdentificationNumber: (\n  idNumber: string | number\n) => boolean = idNumber => {\n  const ci = typeof idNumber === 'number' ? idNumber.toString() : idNumber;\n\n  if (ci.length < 7 || ci.length > 8) {\n      return false;\n  }\n\n  const cleanNumber = cleanIdNumber(ci);\n  const possibleValidationDigit = parseInt(\n    cleanNumber[cleanNumber.length - 1],\n    10\n  );\n\n  const validableNumber = cleanNumber.replace(/[0-9]$/, '');\n  const actualValidationDigit = generateValidationDigit(validableNumber);\n\n  return possibleValidationDigit === actualValidationDigit;\n};\n"],"names":["cleanIdNumber","idNumber","replace","generateValidationDigit","ci","toString","length","i","safeGenerateValidationDigit","sum","parseInt","generateRandomNumber","base","Math","floor","random","substring","validateIdentificationNumber","cleanNumber","possibleValidationDigit","validableNumber","actualValidationDigit"],"mappings":"AAAA;;;;IAIaA,aAAa,GAAiC,SAA9CA,aAA8C,CAAAC,QAAQ;AAAA,SACjEA,QAAQ,CAACC,OAAT,CAAiB,KAAjB,EAAwB,EAAxB,CADiE;AAAA;;ACJnE;;;;;;;;AAQA,IAAaC,uBAAuB,GAEtB,SAFDA,uBAEC,CAAAF,QAAQ;AACpB,MAAIG,EAAE,GAAG,OAAOH,QAAP,KAAoB,QAApB,GAA+BA,QAAQ,CAACI,QAAT,EAA/B,GAAqDJ,QAA9D;;AAEA,MAAIG,EAAE,CAACE,MAAH,IAAa,CAAjB,EAAoB;AAClB,SAAK,IAAIC,CAAC,GAAGH,EAAE,CAACE,MAAhB,EAAwBC,CAAC,GAAG,CAA5B,EAA+BA,CAAC,EAAhC,EAAoC;AAClCH,MAAAA,EAAE,GAAG,MAAMA,EAAX;AACD;AACF;;AAED,SAAOI,2BAA2B,CAACJ,EAAD,CAAlC;AACD,CAZM;;AAcP,IAAMI,2BAA2B,GAAiC,SAA5DA,2BAA4D,CAAAP,QAAQ;AACxE,MAAIG,EAAE,GAAGH,QAAT;AACA,MAAIQ,GAAG,GAAG,CAAV;;AAEA,OAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1BE,IAAAA,GAAG,IAAKC,QAAQ,CAAC,UAAUH,CAAV,CAAD,CAAR,GAAyBG,QAAQ,CAACN,EAAE,CAACG,CAAD,CAAH,CAAlC,GAA6C,EAApD;AACD;;AAED,MAAIE,GAAG,GAAG,EAAN,KAAa,CAAjB,EAAoB;AAClB,WAAO,CAAP;AACD;;AAED,SAAO,KAAMA,GAAG,GAAG,EAAnB;AACD,CAbD;;ACpBA;;;;AAGA,IAAaE,oBAAoB,GAAiB,SAArCA,oBAAqC;AAChD,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,QAAhB,GAA6B,OAAxC,EAAmDV,QAAnD,EAAb;AACA,SAAOO,IAAI,CAACI,SAAL,CAAe,CAAf,EAAkB,CAAlB,IAAuBb,uBAAuB,CAACS,IAAD,CAArD;AACD,CAHM;;ACFP;;;;;;AAKA,IAAaK,4BAA4B,GAE1B,SAFFA,4BAEE,CAAAhB,QAAQ;AACrB,MAAMG,EAAE,GAAG,OAAOH,QAAP,KAAoB,QAApB,GAA+BA,QAAQ,CAACI,QAAT,EAA/B,GAAqDJ,QAAhE;;AAEA,MAAIG,EAAE,CAACE,MAAH,GAAY,CAAZ,IAAiBF,EAAE,CAACE,MAAH,GAAY,CAAjC,EAAoC;AAChC,WAAO,KAAP;AACH;;AAED,MAAMY,WAAW,GAAGlB,aAAa,CAACI,EAAD,CAAjC;AACA,MAAMe,uBAAuB,GAAGT,QAAQ,CACtCQ,WAAW,CAACA,WAAW,CAACZ,MAAZ,GAAqB,CAAtB,CAD2B,EAEtC,EAFsC,CAAxC;AAKA,MAAMc,eAAe,GAAGF,WAAW,CAAChB,OAAZ,CAAoB,QAApB,EAA8B,EAA9B,CAAxB;AACA,MAAMmB,qBAAqB,GAAGlB,uBAAuB,CAACiB,eAAD,CAArD;AAEA,SAAOD,uBAAuB,KAAKE,qBAAnC;AACD,CAnBM;;;;"}